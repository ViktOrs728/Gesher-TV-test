<!DOCTYPE html>
<html dir="rtl">
<head>
<meta charset="UTF-8">
<title>לוח הצגות - GESHER</title>

<style>
body{
    background: rgb(1, 67, 43);
    color: white;
    font-family: Arial;
    margin: 0;
    padding: 30px;
}

h1{
    text-align: center;
    font-size: 60px;
    margin-bottom: 30px;
}

table{
    width: 100%;
    border-collapse: collapse;
    font-size: 32px;
}

th{
    background:#111;
    padding: 20px;
    border-bottom: 2px solid #555;
}

td{
    padding: 18px;
    border-bottom: 1px solid #333;
}

tr:nth-child(even){
    background:#0c0c0c;
}

.time{ width: 15%; }
.title{ width: 35%; }
.place{ width: 25%; }
.note{ width: 25%; }
</style>
</head>

<body>

<h1>לוח הצגות</h1>

<table id="schedule">
<tr>
    <th>תאריך</th>
    <th>שם ההצגה</th>
    <th>שעה</th>
    <th>מקום</th>
</tr>
</table>

<script>
const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQ8VHJ7usLuV213YvhCULcjqMrH6M22QQ_cLDtP8f6u0cb7XXKbeBVzEoKRGmigGFm_EQvtN17sQGi2/pub?gid=0&single=true&output=csv"

async function loadSchedule() {
    const response = await fetch(CSV_URL);
    const data = await response.text();

    const rows = data.split("\n").map(r => r.split(","));
    const table = document.getElementById("schedule");

    // Очищаем всё кроме заголовков
    table.innerHTML = `
        <tr>
            <th>תאריך</th>
             <th>שם ההצגה</th>
            <th>שעה</th>
             <th>מקום</th>
           
        </tr>
    `;

    for(let i = 1; i < rows.length; i++){
        if(rows[i].length < 4) continue;

        const row = document.createElement("tr");

        rows[i].forEach(cell => {
            const td = document.createElement("td");
            td.textContent = cell.replace(/"/g, "");
            row.appendChild(td);
        });

        table.appendChild(row);
    }
}

loadSchedule();
setInterval(loadSchedule, 30000); // автообновление каждые 30 секунд
</script>

</body>
</html>
