<!DOCTYPE html>
<html dir="rtl">
<head>
<meta charset="UTF-8">
<title> GESHER</title>

<style>
body{
    background: rgb(32, 105, 8);
    color: rgb(255, 255, 255);
    font-family: Arial;
    margin: 0;
    padding: 30px;
}
.header-bar{
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
}
h1{
    font-size: 60px;
    margin: 0;
}
#clock {
    font-size: 34px;
    background:#111;
    padding: 10px 25px;
    border-radius: 20px;
}

h1{
    text-align: center;
    font-size: 60px;
    margin-bottom: 30px;
 
}

h2{
    text-align: center;
    font-size: 20px;
    margin-bottom: 10px;
}

table{
    width: 100%;
    border-collapse: collapse;
    font-size: 32px;
    text-align: center;
}

th{
    background:#2d837a;
    padding: 20px;
    border-radius: 20px;
}

td{
    padding: 18px;
    border-bottom: 1px solid #333;
}
tr:nth-child(even){
    background:#212121;
}

.time{ width: 15%; }
.title{ width: 35%; }
.place{ width: 25%; }
.note{ width: 25%; }
</style>

</head>

<body>

<h1>לוח הצגות</h1>
<h2>test test test</h2>
<div id="clock">--:--</div>
</div>

<table id="schedule">
<div class="table-wrapper">
    <table id="schedule">
        <thead>
        <tr>
    <th>תאריך</th>
    <th>שם ההצגה</th>
    <th>שעה</th>
    <th>מקום</th>
    <th>הערה</th>
    <th>אילוצים</th>
 </tr>
        </thead>
        <tbody></tbody>
    </table>
</div>

<script>
const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vQ8VHJ7usLuV213YvhCULcjqMrH6M22QQ_cLDtP8f6u0cb7XXKbeBVzEoKRGmigGFm_EQvtN17sQGi2/pub?gid=0&single=true&output=csv"

function getTelAvivTime(){
    const now = new Date();
    const options = {
        timeZone: "Asia/Jerusalem",
        hour: "2-digit",
        minute: "2-digit",
        second: "2-digit"
    }
    return new Intl.DateTimeFormat("he-IL", options).format(now);
}

function updateClock(){
    document.getElementById("clock").textContent = getTelAvivTime();
}

setInterval(updateClock, 1000);
updateClock();

async function loadSchedule() {
    const response = await fetch(CSV_URL);
    const data = await response.text();

    const rows = data.split("\n").map(r => r.split(","));
    const table = document.getElementById("schedule");

    // Очищаем всё кроме заголовков
    table.innerHTML = `
        <tr>
            <th>תאריך</th>
             <th>שם ההצגה</th>
            <th>שעה</th>
             <th>מקום</th>
              <th>הערה</th>
              <th>אילוצים</th>
           
        </tr>
    `;

    for(let i = 1; i < rows.length; i++){
        if(rows[i].length < 4) continue;

        const row = document.createElement("tr");

        rows[i].forEach(cell => {
            const td = document.createElement("td");
            td.textContent = cell.replace(/"/g, "");
            row.appendChild(td);
        });

        table.appendChild(row);
    }
}

loadSchedule();
setInterval(loadSchedule, 30000);
</script>

</body>
</html>
